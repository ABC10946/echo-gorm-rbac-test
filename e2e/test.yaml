desc: Generated by `runn new`
runners:
  req: http://localhost:1234
steps:
  clean:
    desc: Clean the database
    exec:
      command: bash ./clean.sh
  preprocess:
    desc: Preprocess the data
    exec:
      command: bash ./preprocess.sh
  createItem:
    desc: Create a new item
    req:
      /items:
        post:
          body:
            application/json:
              name: item1
              price: 12
              quantity: 4
  listItems:
    desc: List all items
    req:
      /items:
        get: {}
    test: |
      current.res.status == 200 && 
      len(current.res.body) == 1 &&
      current.res.body[0].name == 'item1'
  listItemWithoutDB:
    desc: List all items without DB
    req:
      /itemsWithoutDB:
        get: {}
    test: |
      current.res.status == 200 && 
      len(current.res.body) == 0
  startUpdateItemVariable:
    desc: Start updating item variable
    req:
      /startUpdateItemVariable:
        get: {}
  listItemWithoutDBAgain:
    desc: List all items without DB again
    loop:
      count: 10
      minInterval: 0.5
      maxInterval: 10
      until: current.res.status == 200 && len(current.res.body) == 1
    req:
      /itemsWithoutDB:
        get: {}
